README for Vera Plugin for Nest Thermostats


PURPOSE

- Monitor and control your Nest thermostat(s) through your Vera home automation gateway.


FEATURES

- Monitor thermostat mode, fan mode, current and set point temperatures, humidity level, running and idle states and battery level.
- Control temperature set points, thermostat mode, and fan mode.
- Set your house to Home or Away, switching all your Nest thermostats to an energy saving mode when unoccupied.


HOW TO USE

- Open the settings for the Nest device that was created at plugin installation, and set your nest.com user name and password.  Also choose a polling frequency (in seconds) if you want to poll more or less often than the default 120 seconds.  You may not poll more often than every 60 seconds, as this might be considered abusive by the nest.com servers.
- Shortly after saving your changes, the plugin will login to nest.com and retrieve all of the locations associated with your account, and all the thermostats within each location.  Since the Nest also contains a humidity sensor, the plugin also creates a humidistat device for each thermostat it discovers.


NOTES AND LIMITATIONS

- Only works with Vera UI5 1.5.408 or later.

- When a thermostat's current operating mode is AutoChangeOver, the current heat and cool setpoints reflect the allowed range as you would expect.  However, in the HeatOn or CoolOn operating modes, both the heat and cool setpoints reflect the same, single target temperature.  This is a side effect of the Nest's design.

- The plugin is based on an undocumented and unsupported interface to Nest, which may change or break or otherwise become inaccessible at any time.

- Updates to the state of the Location, Thermostat and Humidistat devices can take up to the polling number of seconds (120 by default) to be reflected in the UPnP devices (or as quickly as 5 seconds).  I am investigating a change that would make these updates much faster, but I cannot guarantee that this will be implemented.  In any case, I believe that the current approach will work for almost all users.

- BatteryLevel percentage is tied to a voltage range of 3.6 to 3.9 volts.  Any actual voltage below 3.6 is considered 0% and any voltage above 3.9 is considered 100%.  (Battery level may be important to some users, as the battery is charged by leeching power during heating or cooling.  If there is a problem, the battery level will continue to decline until the device turns off the proximity function, wi-fi and then itself.)

- The humidistat device currently only implements the humidity sensor service, but as the 2nd generation Nest thermostats can also control humidifers and dehumidifiers, this device type will be extended to implement new services.

- The "Home/Away" device implements urn:schemas-upnp-org:service:HouseStatus:1, but since I didn't find an S_HouseStatus1.xml file in my Vera, one is packaged with the plugin.


LICENSE

Copyright (C) 2012  John W. Cocula

This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with this program.  If not, see <http://www.gnu.org/licenses/>.


THANKS

- futzle, garretwp, guessed, RichardTSchaefer and others for Vera plugin development support


PLANS (hopeful)

- See about integrating historical energy usage data into the plugin.
- Have status updates arrive more quickly.
- Report the heating or cooling stage, since Nest supports multiple heating and cooling stages.
- More automation.
- Implement Humidistat functionality to control humidity from Vera.


CHANGELOG

2012-12-10    0.5   First beta


